<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kekxv.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":true,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="JSON 工具              &#x2F;* CSS has one final fix in .action-button *&#x2F;         :root {             --bg-color: #f4f6f8; --panel-bg: #ffffff; --border-color: #e1e4e8;             --text-co">
<meta property="og:type" content="website">
<meta property="og:title" content="kekxv 技术日志">
<meta property="og:url" content="http://kekxv.github.io/files/20250629/json-tools.html">
<meta property="og:site_name" content="kekxv 技术日志">
<meta property="og:description" content="JSON 工具              &#x2F;* CSS has one final fix in .action-button *&#x2F;         :root {             --bg-color: #f4f6f8; --panel-bg: #ffffff; --border-color: #e1e4e8;             --text-co">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-06-28T16:23:51.961Z">
<meta property="article:modified_time" content="2025-06-28T16:23:51.961Z">
<meta property="article:author" content="kekxv">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://kekxv.github.io/files/20250629/json-tools">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title> | kekxv 技术日志
</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/feed.xml" title="kekxv 技术日志" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">kekxv 技术日志</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">kekxv</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">78</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">66</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tla3h2" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
  
  

          <div class="content page posts-expand">
            

    
    
    
    <div class="post-block" lang="zh-CN">
      <header class="post-header">

<h1 class="post-title" itemprop="name headline">
</h1>

<div class="post-meta">
  
  <ul class="breadcrumb">
          
            <li><a href="/files/">FILES</a></li>
            <li><a href="/files/20250629/">20250629</a></li>
            <li>JSON-TOOLS</li>
          
  </ul>

</div>

</header>

      
      
      
      <div class="post-body">
          <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON 工具</title>
    <style>
        /* CSS has one final fix in .action-button */
        :root {
            --bg-color: #f4f6f8; --panel-bg: #ffffff; --border-color: #e1e4e8;
            --text-color: #24292e; --text-secondary-color: #586069; --primary-color: #007bff;
            --primary-color-hover: #0056b3; --green-color: #28a745; --red-color: #d73a49;
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            --json-key: #032f62; --json-string: #d73a49; --json-number: #005cc5;
            --json-boolean: #e36209; --json-null: #6f42c1;
        }
        body { font-family: var(--font-main); margin: 0; background-color: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; height: 100vh; }
        .container { width: 98%; max-width: 1800px; margin: 0 auto; display: flex; flex-direction: column; height: 100%; }
        header { padding: 15px 0; flex-shrink: 0; }
        h1 { text-align: center; margin: 0; font-size: 28px; font-weight: 600; color: var(--text-color); }
        .tabs { display: flex; justify-content: center; margin-top: 20px; border-bottom: 1px solid var(--border-color); }
        .tab-button { padding: 12px 25px; cursor: pointer; border: none; background-color: transparent; color: var(--text-secondary-color); font-size: 16px; font-weight: 500; border-bottom: 3px solid transparent; transition: all 0.2s ease; transform: translateY(1px); }
        .tab-button:hover { color: var(--primary-color); }
        .tab-button.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .tab-content { display: none; flex-grow: 1; overflow: hidden; padding-top: 15px; }
        .tab-content.active { display: flex; flex-direction: column; }
        
        .panel { background-color: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); display: flex; flex-direction: column; overflow: hidden; }
        .panel-toolbar { display: flex; align-items: center; padding: 10px 15px; background-color: #fcfcfd; border-bottom: 1px solid var(--border-color); flex-shrink: 0; gap: 10px; }
        .panel-toolbar .title { font-weight: 600; margin-right: auto; font-size: 16px; }
        .icon-button { background: none; border: 1px solid transparent; color: var(--text-secondary-color); cursor: pointer; padding: 0; width: 32px; height: 32px; border-radius: 5px; display: inline-flex; align-items: center; justify-content: center; transition: all 0.2s ease; }
        .icon-button:hover { background-color: #f1f1f1; color: var(--text-color); }
        .icon-button svg { width: 18px; height: 18px; }

        /* V13 FIX: Improved alignment for buttons with icons and text */
        .action-button {
            padding: 10px 15px; font-size: 16px; font-weight: 500; background-color: var(--primary-color);
            color: white; border: none; border-radius: 6px; cursor: pointer;
            transition: background-color 0.2s; display: inline-flex;
            align-items: center; /* Revert to center and control wrapping */
            justify-content: center;
            gap: 8px;
            text-align: center;
        }
        /* Prevents the text from wrapping, which is the root cause on some screen widths */
        .action-button span {
            white-space: nowrap;
        }
        .action-button:hover { background-color: var(--primary-color-hover); }

        textarea, pre { flex-grow: 1; width: 100%; background-color: transparent; color: var(--text-color); border: none; padding: 12px; font-family: var(--font-mono); font-size: 14px; line-height: 1.6; box-sizing: border-box; resize: none; outline: none; }
        textarea { min-height: 300px; }
        pre { overflow: auto; white-space: pre; }
        
        .collapsible { padding-left: 20px; position: relative; }
        .toggle-icon { position: absolute; left: 0; top: 0; cursor: pointer; width: 20px; text-align: center; user-select: none; color: #999; }
        .collapsible.collapsed > .collapsible-content, .collapsible.collapsed > .collapsible-footer { display: none; }
        .collapsible.collapsed > .collapsible-header > .collapsible-preview { display: inline; }
        .collapsible-preview { display: none; color: var(--text-secondary-color); font-style: italic; }
        
        #formatter-view .collapsible-header, #formatter-view .collapsible-footer { display: flex; align-items: center; }

        .json-key { color: var(--json-key); } .json-string { color: var(--json-string); }
        .json-number { color: var(--json-number); } .json-boolean { color: var(--json-boolean); }
        .json-null { color: var(--json-null); }

        #comparer-view { display: flex; flex-direction: column; height: 100%; gap: 15px; }
        .comparer-inputs { display: flex; gap: 15px; flex-shrink: 0; transition: all 0.3s ease-in-out; max-height: 500px; }
        .comparer-inputs.collapsed { max-height: 54px; overflow: hidden; }
        .compare-panel { flex: 1; }
        .comparer-actions-bar { display: flex; align-items: center; justify-content: center; gap: 20px; padding: 5px 0; }
        .comparer-output-panel { flex-grow: 1; min-height: 150px; }
        .comparer-output { height: 100%; overflow: auto; font-family: var(--font-mono); font-size: 14px; line-height: 1.7; padding: 10px; }
        .diff-node { padding-left: 20px; position: relative; white-space: nowrap; display: flex; align-items: flex-start; }
        .diff-filter label, .comparer-actions-bar label { cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 14px; color: var(--text-secondary-color); }
        .diff-key { font-weight: 500; color: var(--json-key); white-space: pre; }
        .diff-value { white-space: pre; }
        .diff-node.same .diff-value { color: var(--green-color); }
        .diff-node.diff .diff-value { color: var(--red-color); }
        .diff-node.only-left { background-color: #ffeef0; }
        .diff-node.only-right { background-color: #e6ffed; }
        .diff-node.only-left::before, .diff-node.only-right::before { content: "−"; color: var(--red-color); position: absolute; left: 5px; font-weight: bold; }
        #compare-output .collapsible { padding-left: 0; }
        #compare-output .collapsible-header .toggle-icon { position: static; margin-right: 5px; }
        #compare-output .collapsible-content { padding-left: 20px; }
        .comparer-output.show-diff-only .collapsible.no-diff { display: none; }
        
        .file-input { position: relative; display: inline-block; }
        .file-input-label { background-color: #6c757d; color: white; padding: 6px 12px; border-radius: 5px; cursor: pointer; font-size: 14px; transition: background-color 0.2s; }
        .file-input-label:hover { background-color: #5a6268; }
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background-color: #323232; color: white; padding: 12px 25px; border-radius: 6px; z-index: 1000; opacity: 0; transition: all 0.4s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .toast.show { opacity: 1; transform: translate(-50%, -10px); }
    </style>
</head>
<body>
    <!-- HTML updated to include spans around button text -->
    <div class="container"><header><h1>JSON 工具箱</h1><nav class="tabs"><button class="tab-button active" data-tab="formatter">JSON 格式化</button><button class="tab-button" data-tab="comparer">JSON 对比</button></nav></header><main class="content"><div id="formatter" class="tab-content active"><div id="formatter-view"><div class="panel formatter-input-panel" id="formatter-input-panel"><div class="panel-toolbar"><span class="title">输入</span><div class="file-input"><label for="json-file-input" class="file-input-label">上传文件</label><input type="file" id="json-file-input" accept=".json, .txt"></div><button class="icon-button" id="toggle-formatter-input" title="收起/展开面板"></button></div><div class="main-content"><label style="padding: 12px 15px 0; font-size:14px; color: var(--text-secondary-color);"><input type="checkbox" id="url-decode-check" style="margin-right:8px;"> URL解码 (在格式化前)</label><textarea id="json-input" placeholder="在此处粘贴 JSON 数据..."></textarea></div></div><div class="formatter-actions"><button id="format-btn" class="action-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 18H14V16H10V18ZM6 8V6H18V8H6ZM8 13H16V11H8V13Z"></path></svg><span>格式化</span></button></div><div class="panel formatter-output-panel"><div class="panel-toolbar"><span class="title">输出</span><button class="icon-button" id="sort-btn" title="字段排序 (A-Z)"></button><button class="icon-button" id="copy-btn" title="复制结果"></button></div><pre id="json-output"></pre></div></div></div><div id="comparer" class="tab-content"><div id="comparer-view"><div class="comparer-inputs" id="comparer-inputs-panel"><div class="panel compare-panel"><div class="panel-toolbar"><span class="title">JSON 1 (左)</span><div class="file-input"><label for="json-file-input-1" class="file-input-label">上传</label><input type="file" id="json-file-input-1"></div></div><div class="main-content"><textarea id="json-input-1" placeholder="在此处粘贴第一个 JSON..."></textarea></div></div><div class="panel compare-panel"><div class="panel-toolbar"><span class="title">JSON 2 (右)</span><div class="file-input"><label for="json-file-input-2" class="file-input-label">上传</label><input type="file" id="json-file-input-2"></div></div><div class="main-content"><textarea id="json-input-2" placeholder="在此处粘贴第二个 JSON..."></textarea></div></div></div><div class="comparer-actions-bar"><label><input type="checkbox" id="sort-before-compare" checked> 对比前排序</label><button id="compare-btn" class="action-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2.99999 10.5V13.5H11V15.5L14.5 12L11 8.5V10.5H2.99999ZM21 10.5V13.5H13V15.5L9.5 12L13 8.5V10.5H21Z"></path></svg><span>开始对比</span></button><button class="icon-button" id="toggle-comparer-input" title="收起/展开输入框"></button></div><div class="panel comparer-output-panel"><div class="panel-toolbar"><span class="title">对比结果</span><div class="diff-filter"><label><input type="radio" name="diff-filter" value="all" checked> 显示全部</label><label><input type="radio" name="diff-filter" value="diff-only"> 只看差异</label></div></div><div id="compare-output" class="comparer-output"></div></div></div></div></main></div><div id="toast" class="toast"></div>

    <script>
    // JS is identical to V11 as the fix is purely in HTML and CSS
    document.addEventListener('DOMContentLoaded', () => {
        const ICONS = {sort: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 18H8V16H4V18ZM4 13H12V11H4V13ZM4 8H16V6H4V8ZM18.5 11L16 14H21L18.5 11ZM18.5 19L16 16H21L18.5 19Z"></path></svg>`,copy: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z"></path></svg>`,collapseLeft: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.586L7.707 6.293 6.293 7.707 10.586 12 6.293 16.293 7.707 17.707 12 13.414 16.293 17.707 17.707 16.293 13.414 12 17.707 7.707 16.293 6.293 12 10.586z"></path></svg>`,expandRight: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 13.414L7.707 17.707 6.293 16.293 10.586 12 6.293 7.707 7.707 6.293 12 10.586 16.293 6.293 17.707 7.707 13.414 12 17.707 16.293l-1.414 1.414L12 13.414z"></path></svg>`,collapseUp: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.828l-4.95 4.95-1.414-1.414L12 8l6.364 6.364-1.414 1.414z"></path></svg>`,expandDown: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z"></path></svg>`,};
        const toast = document.getElementById('toast');
        function showToast(message) { toast.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 2000); }
        function handleFileUpload(event, targetTextareaId) { const file = event.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = (e) => { document.getElementById(targetTextareaId).value = e.target.result; }; reader.readAsText(file); }
        function sortObjectKeys(obj) { if (typeof obj !== 'object' || obj === null) return obj; if (Array.isArray(obj)) return obj.map(sortObjectKeys); return Object.keys(obj).sort().reduce((acc, key) => { acc[key] = sortObjectKeys(obj[key]); return acc; }, {}); }
        function getType(val) { if (Array.isArray(val)) return 'array'; if (typeof val === 'object' && val !== null) return 'object'; return 'primitive'; }
        const tabButtons = document.querySelectorAll('.tab-button'); const tabContents = document.querySelectorAll('.tab-content');
        tabButtons.forEach(button => button.addEventListener('click', () => { tabButtons.forEach(btn => btn.classList.remove('active')); button.classList.add('active'); const targetTab = button.getAttribute('data-tab'); tabContents.forEach(content => { content.id === targetTab ? content.classList.add('active') : content.classList.remove('active'); }); }));
        function handleToggle(event) { const target = event.target; if (!target.classList.contains('toggle-icon')) return; const collapsible = target.closest('.collapsible'); if (collapsible) { collapsible.classList.toggle('collapsed'); target.textContent = collapsible.classList.contains('collapsed') ? '▶' : '▼'; } }
        const jsonInput = document.getElementById('json-input'), jsonOutput = document.getElementById('json-output'), formatBtn = document.getElementById('format-btn'), sortBtn = document.getElementById('sort-btn'), copyBtn = document.getElementById('copy-btn'), urlDecodeCheck = document.getElementById('url-decode-check'), jsonFileInput = document.getElementById('json-file-input'), toggleFormatterInputBtn = document.getElementById('toggle-formatter-input'), formatterInputPanel = document.getElementById('formatter-input-panel');
        sortBtn.innerHTML = ICONS.sort; copyBtn.innerHTML = ICONS.copy; toggleFormatterInputBtn.innerHTML = ICONS.collapseLeft;
        jsonFileInput.addEventListener('change', (e) => handleFileUpload(e, 'json-input'));
        jsonOutput.addEventListener('click', handleToggle);
        function buildJsonNode(data) { const type = getType(data); if (type === 'primitive') { const el = document.createElement('span'); let className = 'json-number'; if (typeof data === 'string') className = 'json-string'; else if (typeof data === 'boolean') className = 'json-boolean'; else if (data === null) className = 'json-null'; el.className = className; el.textContent = JSON.stringify(data); return el; } const isObject = type === 'object'; const startChar = isObject ? '{' : '['; const endChar = isObject ? '}' : ']'; const len = isObject ? Object.keys(data).length : data.length; const container = document.createElement('div'); container.className = 'collapsible'; const headerLine = document.createElement('div'); headerLine.className = 'collapsible-header'; const toggle = document.createElement('span'); toggle.className = 'toggle-icon'; toggle.textContent = '▼'; headerLine.appendChild(toggle); headerLine.append(startChar); const preview = document.createElement('span'); preview.className = 'collapsible-preview'; preview.textContent = isObject ? '...}' : `... ](${len})`; headerLine.appendChild(preview); container.appendChild(headerLine); const content = document.createElement('div'); content.className = 'collapsible-content'; const entries = isObject ? Object.entries(data) : data.entries(); for (const [key, value] of entries) { const line = document.createElement('div'); if (isObject) { const keyEl = document.createElement('span'); keyEl.className = 'json-key'; keyEl.textContent = `"${key}": `; line.appendChild(keyEl); } const valueNode = buildJsonNode(value); if (getType(value) !== 'primitive') { const childHeader = valueNode.querySelector('.collapsible-header'); if (isObject) { const keyEl = document.createElement('span'); keyEl.className = 'json-key'; keyEl.textContent = `"${key}": `; childHeader.insertBefore(keyEl, childHeader.firstChild); } content.appendChild(valueNode); } else { line.appendChild(valueNode); content.appendChild(line); } } container.appendChild(content); const footer = document.createElement('div'); footer.className = 'collapsible-footer'; footer.textContent = endChar; container.appendChild(footer); return container; }
        formatBtn.addEventListener('click', () => { let inputText = jsonInput.value.trim(); if (!inputText) return showToast('输入不能为空'); try { if (urlDecodeCheck.checked) { inputText = decodeURIComponent(inputText); } const jsonObj = JSON.parse(inputText); jsonOutput.innerHTML = ''; jsonOutput.appendChild(buildJsonNode(jsonObj)); } catch (e) { jsonOutput.innerHTML = `<span style="color:var(--red-color)">JSON 解析错误: ${e.message}</span>`; showToast('JSON 格式无效'); } });
        sortBtn.addEventListener('click', () => { try { const textToParse = jsonInput.value.trim(); if (!textToParse) return showToast("输入区为空"); const jsonObj = JSON.parse(textToParse); jsonOutput.innerHTML = ''; jsonOutput.appendChild(buildJsonNode(sortObjectKeys(jsonObj))); showToast('字段已排序'); } catch (e) { showToast('排序失败, 请确保输入区有有效的JSON'); } });
        copyBtn.addEventListener('click', () => { let text = jsonInput.value.trim(); if (!text) return showToast('没有内容可以复制'); try { const obj = JSON.parse(text); navigator.clipboard.writeText(JSON.stringify(obj, null, 2)).then(() => showToast('格式化后的内容已复制')).catch(() => showToast('复制失败')); } catch(e) { showToast('无法复制无效的JSON'); } });
        toggleFormatterInputBtn.addEventListener('click', () => { const isCollapsed = formatterInputPanel.classList.toggle('collapsed'); toggleFormatterInputBtn.innerHTML = isCollapsed ? ICONS.expandRight : ICONS.collapseLeft; toggleFormatterInputBtn.title = isCollapsed ? '展开面板' : '收起面板'; });
        const jsonInput1 = document.getElementById('json-input-1'), jsonInput2 = document.getElementById('json-input-2'), compareBtn = document.getElementById('compare-btn'), compareOutput = document.getElementById('compare-output'), jsonFileInput1 = document.getElementById('json-file-input-1'), jsonFileInput2 = document.getElementById('json-file-input-2'), toggleComparerInputBtn = document.getElementById('toggle-comparer-input'), comparerInputsPanel = document.getElementById('comparer-inputs-panel'), diffFilterRadios = document.querySelectorAll('input[name="diff-filter"]'), sortBeforeCompareCheck = document.getElementById('sort-before-compare');
        toggleComparerInputBtn.innerHTML = ICONS.collapseUp; compareOutput.addEventListener('click', handleToggle); jsonFileInput1.addEventListener('change', (e) => handleFileUpload(e, 'json-input-1')); jsonFileInput2.addEventListener('change', (e) => handleFileUpload(e, 'json-input-2')); toggleComparerInputBtn.addEventListener('click', () => { const isCollapsed = comparerInputsPanel.classList.toggle('collapsed'); toggleComparerInputBtn.innerHTML = isCollapsed ? ICONS.expandDown : ICONS.collapseUp; toggleComparerInputBtn.title = isCollapsed ? '展开输入框' : '收起输入框'; }); diffFilterRadios.forEach(radio => radio.addEventListener('change', (e) => { compareOutput.classList.toggle('show-diff-only', e.target.value === 'diff-only'); }));
        compareBtn.addEventListener('click', () => { let obj1, obj2; try { obj1 = JSON.parse(jsonInput1.value.trim() || '{}'); } catch (e) { return showToast('JSON 1 格式无效'); } try { obj2 = JSON.parse(jsonInput2.value.trim() || '{}'); } catch (e) { return showToast('JSON 2 格式无效'); } let finalObj1 = obj1, finalObj2 = obj2; if (sortBeforeCompareCheck.checked) { finalObj1 = sortObjectKeys(obj1); finalObj2 = sortObjectKeys(obj2); } compareOutput.innerHTML = ''; compareOutput.appendChild(generateDiffNodes(finalObj1, finalObj2)); if (!comparerInputsPanel.classList.contains('collapsed')) { comparerInputsPanel.classList.add('collapsed'); toggleComparerInputBtn.innerHTML = ICONS.expandDown; toggleComparerInputBtn.title = '展开输入框'; } });
        function createNode(innerHTML, className) { const node = document.createElement('div'); node.className = className; node.innerHTML = innerHTML; return node; }
        function generateDiffNodes(val1, val2, prefix = '') { const type1 = getType(val1); const type2 = getType(val2); if (type1 !== type2) { const node = createNode('', 'diff-node diff'); node.innerHTML = `${prefix}<span class="diff-value">${JSON.stringify(val1)}</span> <i style="color:var(--text-secondary-color); font-style:normal; margin:0 8px; flex-shrink:0;">↔</i> <span class="diff-value">${JSON.stringify(val2)}</span>`; return node; } if (type1 === 'primitive') { const areEqual = val1 === val2; const node = createNode('', 'diff-node ' + (areEqual ? 'same' : 'diff')); node.innerHTML = `${prefix}<span class="diff-value">${JSON.stringify(val1)}</span>`; if (!areEqual) { node.innerHTML += ` <i style="color:var(--text-secondary-color); font-style:normal; margin:0 8px; flex-shrink:0;">↔</i> <span class="diff-value">${JSON.stringify(val2)}</span>`; } return node; } const isObject = type1 === 'object'; const startChar = isObject ? '{' : '['; const endChar = isObject ? '}' : ']'; const len1 = isObject ? Object.keys(val1).length : val1.length; const len2 = isObject ? Object.keys(val2).length : val2.length; const areEqual = JSON.stringify(val1) === JSON.stringify(val2); const container = document.createElement('div'); container.className = 'collapsible diff-block' + (areEqual ? ' no-diff' : ' has-diff'); const header = createNode('', 'collapsible-header diff-node'); header.innerHTML = `<span class="toggle-icon">▼</span>${prefix}${startChar}`; container.appendChild(header); const preview = document.createElement('span'); preview.className = 'collapsible-preview'; preview.textContent = isObject ? '...}' : `... ](${Math.max(len1, len2)})`; header.appendChild(preview); const content = document.createElement('div'); content.className = 'collapsible-content'; if (isObject) { const allKeys = Array.from(new Set([...Object.keys(val1), ...Object.keys(val2)])); if (sortBeforeCompareCheck.checked) allKeys.sort(); allKeys.forEach(key => { const keyHtml = `<span class="diff-key">"${key}"</span>: `; if (key in val1 && key in val2) { content.appendChild(generateDiffNodes(val1[key], val2[key], keyHtml)); } else if (key in val1) { content.appendChild(createFullSubtree(val1[key], keyHtml, 'only-left')); } else { content.appendChild(createFullSubtree(val2[key], keyHtml, 'only-right')); } }); } else { const maxLength = Math.max(len1, len2); for (let i = 0; i < maxLength; i++) { if (i in val1 && i in val2) { content.appendChild(generateDiffNodes(val1[i], val2[i], '')); } else if (i in val1) { content.appendChild(createFullSubtree(val1[i], '', 'only-left')); } else { content.appendChild(createFullSubtree(val2[i], '', 'only-right')); } } } container.appendChild(content); const footer = createNode(endChar, 'collapsible-footer diff-node'); container.appendChild(footer); return container; }
        function createFullSubtree(data, prefix, className) { const type = getType(data); if (type === 'primitive') { return createNode(`${prefix}<span class="diff-value">${JSON.stringify(data)}</span>`, `diff-node ${className}`); } const isObject = type === 'object'; const startChar = isObject ? '{' : '['; const endChar = isObject ? '}' : ']'; const len = isObject ? Object.keys(data).length : data.length; const container = document.createElement('div'); container.className = `collapsible diff-block ${className}`; const header = createNode('', `collapsible-header diff-node ${className}`); header.innerHTML = `<span class="toggle-icon">▼</span>${prefix}${startChar}`; container.appendChild(header); const preview = document.createElement('span'); preview.className = 'collapsible-preview'; preview.textContent = isObject ? '...}' : `... ](${len})`; header.appendChild(preview); const content = document.createElement('div'); content.className = 'collapsible-content'; const entries = isObject ? Object.entries(data) : data.entries(); for (const [key, value] of entries) { const keyHtml = isObject ? `<span class="diff-key">"${key}"</span>: ` : ''; content.appendChild(createFullSubtree(value, keyHtml, className)); } container.appendChild(content); const footer = createNode(endChar, `collapsible-footer diff-node ${className}`); container.appendChild(footer); return container; }
    });
    </script>
</body>
</html>

      </div>
      
      
      
    </div>
    
  <ul class="breadcrumb">
          
            <li><a href="/files/">FILES</a></li>
            <li><a href="/files/20250629/">20250629</a></li>
            <li>JSON-TOOLS</li>
          
  </ul>

    
    
    


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">JSON 工具箱</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="kekxv"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">kekxv</p>
  <div class="site-description" itemprop="description">kekxv 技术日志</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">78</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2tla3h2" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kekxv"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <a href="/feed.xml" title="RSS → &#x2F;feed.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kekxv</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
